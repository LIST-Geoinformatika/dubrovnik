L.Control.StyledLayerControl=L.Control.Layers.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){var d,e;L.Util.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1,this._groupList=[],this._domGroups=[];for(d in a)for(var e in a[d].layers)this._addLayer(a[d].layers[e],e,a[d],!1);for(d in b)for(var e in b[d].layers)this._addLayer(b[d].layers[e],e,b[d],!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b,c){return this._addLayer(a,b,c,!1),this._update(),this},addOverlay:function(a,b,c){return this._addLayer(a,b,c,!0),this._update(),this},removeLayer:function(a){var b=L.Util.stamp(a);return delete this._layers[b],this._update(),this},removeGroup:function(a){for(group in this._groupList)if(this._groupList[group].groupName==a){for(layer in this._layers)this._layers[layer].group&&this._layers[layer].group.name==a&&delete this._layers[layer];delete this._groupList[group],this._update();break}},_initLayout:function(){var a="leaflet-control-layers",b=this._container=L.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),L.Browser.touch?L.DomEvent.on(b,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(b),L.DomEvent.on(b,"wheel",L.DomEvent.stopPropagation));var c=document.createElement("section");c.className="ac-container "+a+"-list";var d=this._form=L.DomUtil.create("form");if(c.appendChild(d),this.options.collapsed){L.Browser.android||L.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var e=this._layersLink=L.DomUtil.create("a",a+"-toggle",b);e.href="#",e.title="Layers",L.Browser.touch?L.DomEvent.on(e,"click",L.DomEvent.stop).on(e,"click",this._expand,this):L.DomEvent.on(e,"focus",this._expand,this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=L.DomUtil.create("div",a+"-base",d),this._overlaysList=L.DomUtil.create("div",a+"-overlays",d),b.appendChild(c);for(var f=0;f<(containers=b.getElementsByClassName("ac-container")).length;f++)this.options.container_width&&(containers[f].style.width=this.options.container_width),this._default_maxHeight=this.options.container_maxHeight?this.options.container_maxHeight:this._map._size.y-70,containers[f].style.maxHeight=this._default_maxHeight+"px";window.onresize=this._on_resize_window.bind(this)},_on_resize_window:function(){for(var a=0;a<containers.length;a++)containers[a].style.maxHeight=window.innerHeight-90<this._removePxToInt(this._default_maxHeight)?window.innerHeight-90+"px":this._removePxToInt(this._default_maxHeight)+"px"},_removePxToInt:function(a){return parseInt(a.replace("px",""))},_addLayer:function(a,b,c,d){var e=L.Util.stamp(a);if(this._layers[e]={layer:a,name:b,overlay:d},c){var f=this._groupList.indexOf(c);if(-1===f)for(g in this._groupList)if(this._groupList[g].groupName==c.groupName){f=g;break}-1===f&&(f=this._groupList.push(c)-1),this._layers[e].group={name:c.groupName,id:f,expanded:c.expanded}}this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="",this._domGroups.length=0;var c,d,a=!1,b=!1;for(c in this._layers)d=this._layers[c],this._addItem(d),b=b||d.overlay,a=a||!d.overlay}},_onLayerChange:function(a){var b=this._layers[L.Util.stamp(a.layer)];if(b){this._handlingClick||this._update();var c=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)}},_createRadioElement:function(a,b){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(c+=' checked="checked"'),c+="/>";var d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(a){var c,e,b=document.createElement("div"),d=this._map.hasLayer(a.layer);a.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=d,b.className="menu-item-checkbox"):(c=this._createRadioElement("leaflet-base-layers",d),b.className="menu-item-radio"),c.layerId=L.Util.stamp(a.layer),L.DomEvent.on(c,"click",this._onInputClick,this);var f=document.createElement("span");if(f.innerHTML=" "+a.name,b.appendChild(c),b.appendChild(f),a.layer.StyledLayerControl&&a.layer.StyledLayerControl.removable){var g=document.createElement("input");g.type="button",g.className="bt_delete",L.DomEvent.on(g,"click",this._onDeleteClick,this),b.appendChild(g)}e=a.overlay?this._overlaysList:this._baseLayersList;var h=this._domGroups[a.group.id];if(h)h.lastElementChild.appendChild(b);else{h=document.createElement("div"),h.id="leaflet-control-accordion-layers-"+a.group.id;var i=a.group.expanded?' checked = "true" ':"",j=this.options.exclusive?' type="radio" ':' type="checkbox" ';inputElement='<input id="ac'+a.group.id+'" name="accordion-1" class="menu" '+i+j+"/>",inputLabel='<label for="ac'+a.group.id+'">'+a.group.name+"</label>",article=document.createElement("article"),article.className="ac-large",article.appendChild(b),this.options.group_maxHeight&&(article.style.maxHeight=this.options.group_maxHeight),h.innerHTML=inputElement+inputLabel,h.appendChild(article),e.appendChild(h),this._domGroups[a.group.id]=h}return b},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;e>a;a++)b=d[a],c=this._layers[b.layerId],c&&(b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer));this._handlingClick=!1},_onDeleteClick:function(a){var b=a.target.parentElement.childNodes[0];return n_obj=this._layers[b.layerId],!n_obj.overlay&&b.checked?!1:(this._map.hasLayer(n_obj.layer)&&this._map.removeLayer(n_obj.layer),a.target.parentNode.remove(),!1)},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),L.Control.styledLayerControl=function(a,b,c){return new L.Control.StyledLayerControl(a,b,c)};