L.NonTiledLayer.WMS=L.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._wmsUrl=a;var c=L.extend({},this.defaultWmsParams);for(var d in b)L.NonTiledLayer.prototype.options.hasOwnProperty(d)||(c[d]=b[d]);this.wmsParams=c,L.setOptions(this,b)},onAdd:function(a){var b=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[b]=a.options.crs.code,L.NonTiledLayer.prototype.onAdd.call(this,a)},getImageUrl:function(a,b,c,d){var e=this.wmsParams;e.width=c,e.height=d;var f=this._map.options.crs,g=f.project(a),h=f.project(b),i=this._wmsUrl+L.Util.getParamString(e,this._wmsUrl)+"&bbox="+g.x+","+h.y+","+h.x+","+g.y;return i},setParams:function(a,b){return L.extend(this.wmsParams,a),b||this.redraw(),this}}),L.nonTiledLayer.wms=function(a,b){return new L.NonTiledLayer.WMS(a,b)};