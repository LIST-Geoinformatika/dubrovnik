function upaliSloj(a){map.hasLayer(overlaylayers[a])||(map.addLayer(overlaylayers[a]),document.getElementById(a).checked=!0,sloj="."+document.getElementById(a).value+"Legenda",$(sloj).show(),14>a&&(upaljeni_slojevi.push(a),provjeriSlojUGrupi(),$(".nemaslojeva").hide()))}function ugasiSloj(a){map.removeLayer(overlaylayers[a]),document.getElementById(a).checked=!1,sloj="."+document.getElementById(a).value+"Legenda",$(sloj).hide(),upaljeni_slojevi.remove(a),provjeriSlojUGrupi(),0==upaljeni_slojevi.length&&$(".nemaslojeva").show()}function provjeriSlojUGrupi(){function o(a,b,c){0==c?(document.getElementById(b).indeterminate=!1,document.getElementById(b).checked=!1):c<a.length?(document.getElementById(b).indeterminate=!0,document.getElementById(b).checked=!1):c==a.length&&(document.getElementById(b).indeterminate=!1,document.getElementById(b).checked=!0)}for(var a=[0],b=[1,2,3,4,5],c=[6,7,8,9],d=[10,11,12,13],e=0,f=0,g=0,h=0,i=100,j=101,k=106,l=110,m=0;m<upaljeni_slojevi.length;m++){for(var n=0;n<a.length;n++)upaljeni_slojevi[m]==a[n]&&(e+=1);for(var n=0;n<b.length;n++)upaljeni_slojevi[m]==b[n]&&(f+=1);for(var n=0;n<c.length;n++)upaljeni_slojevi[m]==c[n]&&(g+=1);for(var n=0;n<d.length;n++)upaljeni_slojevi[m]==d[n]&&(h+=1)}o(a,i,e),o(b,j,f),o(c,k,g),o(d,l,h)}function capitalize(a){return a[0].toUpperCase()+a.slice(1)}var overlaylayers=[namjena,promet,telekomunikacija,energ_sustavi,voda,odvodnja,bastina,ekomreza,graditeljskabastina,krajobraz,zpvo,uredjenjezemljista,urbanapravila,posebnazastita,naselja,gupgranice,katopcine,katcestice,zgrade,markers,heat],upaljeni_slojevi=[];$(document).ready(function(){function a(a){$.ajax({type:"GET",url:"php/legenda.php",data:{sloj:a},contentType:"application/x-www-form-urlencoded;charset=utf-8",dataType:"json",success:function(b){for(var d,e,f,g,h,c=[],i=0;i<b.length;i++){e=b[i].boja,f="."+a+"Legenda > div",d=b[i].opis_sloja,d=capitalize(d),g=b[i].geometrija_legenda,opis_geometrija=d+g,h=b[i].rotacija,h>0&&(g=g+" "+h),provjeriOpis=!1;for(var j=0;j<c.length;j++)opis_geometrija===c[j]&&(provjeriOpis=!0);0==provjeriOpis&&(c.push(opis_geometrija),"polygon"==g?($(f).append('<div class="simbol_polygon" style="background-color:'+e+'"></div>'),$(f).append("<p>"+d+"</p>")):"line"==g?($(f).append('<div class="simbol_line" style="border-top-color:'+e+'"></div>'),$(f).append("<p>"+d+"</p>")):"line dotted"==g?($(f).append('<div class="simbol_line_dotted" style="color:'+e+'">....</div>'),$(f).append("<p>"+d+"</p>")):"line dashed"==g?($(f).append('<div class="simbol_line_dashed" style="color:'+e+'">- -</div>'),$(f).append("<p>"+d+"</p>")):"stroke"==g?($(f).append('<div class="simbol_stroke" style="border-color:'+e+'"></div>'),$(f).append("<p>"+d+"</p>")):"plus"==g?($(f).append('<div class="simbol_simbol" style="color:'+e+'">&#9638</div>'),$(f).append("<p>"+d+"</p>")):"vertline"==g?($(f).append('<div class="simbol_simbol"> <p style="color:'+e+'">&#9637</p></div>'),$(f).append("<p>"+d+"</p>")):"horline"==g?($(f).append('<div class="simbol_simbol" style="color:'+e+'">&#9636</div>'),$(f).append("<p>"+d+"</p>")):"slash"==g?($(f).append('<div class="simbol_simbol" style="color:'+e+'">&#9640</div>'),$(f).append("<p>"+d+"</p>")):"backslash"==g?($(f).append('<div class="simbol_simbol" style="color:'+e+'">&#9639</div>'),$(f).append("<p>"+d+"</p>")):"times"==g?($(f).append('<div class="simbol_simbol" style="color:'+e+'">&#9641</div>'),$(f).append("<p>"+d+"</p>")):"point"==g||"circle"==g?($(f).append('<div class="simbol_simbol_point2" style="font-size:24px; margin-top: -9px; color:'+e+'">&#9679</div>'),$(f).append("<p>"+d+"</p>")):"point stroke"==g?($(f).append('<div class="simbol_point_stroke" style="border-color:'+e+'"></div>'),$(f).append("<p>"+d+"</p>")):"triangle"==g?($(f).append('<div class="simbol_simbol_point" style="color:'+e+'">&#9650</div>'),$(f).append("<p>"+d+"</p>")):"square"==g?($(f).append('<div class="simbol_simbol_point" style="font-size:16px; color:'+e+'">&#9632</div>'),$(f).append("<p>"+d+"</p>")):"square 45"==g?($(f).append('<div class="simbol_simbol_point" style="font-size:16px; margin-left:19px; margin-right:9px; color:'+e+'">&#9670</div>'),$(f).append("<p>"+d+"</p>")):"triangle 90"==g?($(f).append('<div class="simbol_simbol_point" style="font-size:16px; color:'+e+'">&#9654</div>'),$(f).append("<p>"+d+"</p>")):"triangle 270"==g?($(f).append('<div class="simbol_simbol_point" style="font-size:16px; margin-left:19px; margin-right:9px; color:'+e+'">&#9664</div>'),$(f).append("<p>"+d+"</p>")):"dbc"==g?($(f).append('<div class="simbol_dbc"></div>'),$(f).append("<p>"+d+"</p>")):"gc"==g?($(f).append('<div class="simbol_gc"></div>'),$(f).append("<p>"+d+"</p>")):"ggc"==g?($(f).append('<div class="simbol_ggc"></div>'),$(f).append("<p>"+d+"</p>")):"oc"==g?($(f).append('<div class="simbol_oc"></div>'),$(f).append("<p>"+d+"</p>")):"sc"==g?($(f).append('<div class="simbol_sc"></div>'),$(f).append("<p>"+d+"</p>")):"odc"==g&&($(f).append('<div class="simbol_odc"></div>'),$(f).append("<p>"+d+"</p>")))}}})}function c(a,b){b>f?(document.getElementById(a).disabled=!0,$("label[for='"+a+"']").addClass("sivo"),document.getElementById(a).title="Potrebno je uve\u0107ati prikaz kako bi bilo mogu\u0107e prikazati sloj"):(document.getElementById(a).disabled=!1,$("label[for='"+a+"']").removeClass("sivo"),document.getElementById(a).title="")}function d(a,b,c){c>f?(document.getElementById(a).disabled=!0,$("#"+b).addClass("sivo"),document.getElementById(a).title="Potrebno je uve\u0107ati prikaz kako bi bilo mogu\u0107e prikazati slojeve ove grupe"):(document.getElementById(a).disabled=!1,$("#"+b).removeClass("sivo"),document.getElementById(a).title="")}function e(){d(101,"infrastruktura",14),c(1,14),c(2,14),c(3,14),c(4,14),c(5,14),c(12,13),c(13,13),c(16,17),c(17,18)}$(function(){$("#accord").accordion({collapsible:!0,heightStyle:"content",active:1,icons:{header:"fa fa-folder-o fa-lg",activeHeader:"fa fa-folder-open-o fa-lg"}})}),$(function(){$("#accord2 > div").accordion({header:"h3",collapsible:!0,heightStyle:"content",active:0,icons:{header:"fa fa-chevron-down fa-lg",activeHeader:"fa fa-chevron-up fa-lg"}})}),$(function(){$("#accord1 > div").accordion({header:"h4",collapsible:!0,heightStyle:"content",active:0,icons:{header:"fa fa-folder-o",activeHeader:"fa fa-folder-open-o"}})}),$("#myTab a").click(function(a){a.preventDefault(),$(this).tab("show")}),slojevi=["urbanapravila","namjena","promet","v_grad_bastina","v_zpb","v_ppmz","voda","telekomunikacija","krajobraz","odvodnja","v_nem","energetski_sustavi","zpvo","uredjenje_zemljista"];for(var b=0;b<slojevi.length;b++)a(slojevi[b]);Array.prototype.remove||(Array.prototype.remove=function(a){var b=this.indexOf(a);return b>-1?this.splice(b,1):[]}),document.getElementById("1000").checked=!1,document.getElementById("1001").checked=!1,document.getElementById("1002").checked=!0,document.getElementById("1003").checked=!1,document.getElementById("0").checked=!1,document.getElementById("1").checked=!1,document.getElementById("2").checked=!1,document.getElementById("3").checked=!1,document.getElementById("4").checked=!1,document.getElementById("5").checked=!1,document.getElementById("6").checked=!1,document.getElementById("7").checked=!1,document.getElementById("8").checked=!1,document.getElementById("9").checked=!1,document.getElementById("10").checked=!1,document.getElementById("11").checked=!1,document.getElementById("12").checked=!1,document.getElementById("13").checked=!1,document.getElementById("14").checked=!0,document.getElementById("15").checked=!1,document.getElementById("16").checked=!1,document.getElementById("17").checked=!1,document.getElementById("18").checked=!1,document.getElementById("100").checked=!1,document.getElementById("101").checked=!1,document.getElementById("106").checked=!1,document.getElementById("110").checked=!1,$(".namjenaLegenda").hide(),$(".prometLegenda").hide(),$(".telekomunikacijaLegenda").hide(),$(".energetski_sustaviLegenda").hide(),$(".vodaLegenda").hide(),$(".odvodnjaLegenda").hide(),$(".v_zpbLegenda").hide(),$(".v_nemLegenda").hide(),$(".v_grad_bastinaLegenda").hide(),$(".krajobrazLegenda").hide(),$(".zpvoLegenda").hide(),$(".uredjenje_zemljistaLegenda").hide(),$(".urbanapravilaLegenda").hide(),$(".v_ppmzLegenda").hide(),$(".nemaslojeva").show(),isprazniSveLokInfo();var f=map.getZoom();e(),map.on("zoomend",function(){f=map.getZoom(),e()});var g=[osm,base,dof_dgu,hok_dgu];$(".radio").click(function(){for(var b,a=parseInt(this.id)-1e3,c=0;c<g.length;c++)a==c?(map.addLayer(g[c]),b=c+1e3,document.getElementById(b).checked=!0):(map.removeLayer(g[c]),b=c+1e3,document.getElementById(b).checked=!1)}),$(".checkbox").click(function(){for(var a=parseInt(this.id),b=0;b<overlaylayers.length;b++)a==b&&(map.hasLayer(overlaylayers[b])?ugasiSloj(b):upaliSloj(b))}),$(".grupecheckbox").click(function(){var c,a=parseInt(this.id),b=a-100;100==a?c=101:101==a?c=106:106==a?c=110:110==a&&(c=114);var d=c-100-1;if(1==document.getElementById(a).checked)for(var e=b;d>=e;e++)upaliSloj(e);else for(var e=b;d>=e;e++)ugasiSloj(e)})});